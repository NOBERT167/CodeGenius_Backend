public ActionResult New{{ page_name }}()
{
    try
    {
        if (Session["Username"] == null)
            return RedirectToAction("Login", "Login");

        var StaffNo = Session["Username"].ToString();
        var viewModel = new {{ model_name }}();

        return View("~/Views/{{ page_name }}/PartialViews/New{{ page_name }}.cshtml", viewModel);
    }
    catch (Exception ex)
    {
        var erroMsg = new Error();
        erroMsg.Message = ex.Message.Replace("'", "");
        return View("~/Views/Common/ErrorMessange.cshtml", erroMsg);
    }
}

public JsonResult Submit{{ page_name }}({{ model_name }} viewModel)
{
    try
    {
        var employee = Session["EmployeeData"] as EmployeeView;
        var staffNo = Session["Username"].ToString();
        var UserID = employee?.UserID;

        if (string.IsNullOrEmpty(staffNo))
        {
            return Json(new { message = "User session expired. Please login again.", success = false }, JsonRequestBehavior.AllowGet);
        }

{% if parameters|length > 0 %}
        var result = Credentials.ObjNav.{{ function_name }}(
{% for param in parameters %}{% if param.name.lower() == 'userid' or param.name.lower() == 'loggedinuser' %}UserID{% else %}viewModel.{{ param.csharp_name }}{% endif %}{% if not loop.last %}, {% endif %}{% endfor %}
        );
{% else %}
        var result = Credentials.ObjNav.{{ function_name }}();
{% endif %}

        return Json(new { message = "{{ page_name }} created successfully", success = true, docNo = result }, JsonRequestBehavior.AllowGet);
    }
    catch (Exception ex)
    {
        return Json(new { message = ex.Message.Replace("'", ""), success = false }, JsonRequestBehavior.AllowGet);
    }
}